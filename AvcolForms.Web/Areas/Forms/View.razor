@attribute [Authorize]
@inject UserManager<ApplicationUser> _userManager;
@using AvcolForms.Core.Components.Forms;
@inject NavigationManager _navManager;

@if (_firstLoading){
    <PageTitle>Loading Form ...</PageTitle>
    <MudProgressCircular Indeterminate="true"></MudProgressCircular>
}
else {
    <PageTitle>@AppForm.Title</PageTitle>

    <MudBreadcrumbs Items="@_items"></MudBreadcrumbs>

    <MudText Typo="Typo.h3" Align="Align.Center">@AppForm.Title</MudText>

    @if (AppForm.Content is not null && AppForm.Content.Any())
    {
        @foreach (var item in AppForm.Content)
        {
            <FormContentComponent Content="@item" />
        }
    }
    else
    {
        <MudAlert Severity="Severity.Warning">This form contains no elements to respond to!</MudAlert>
    }

    <br/>
    <br/>

    <MudAlert Severity="Severity.Info">Close Off: @AppForm.Closes.ToLocalTimeOrNone()</MudAlert>
}